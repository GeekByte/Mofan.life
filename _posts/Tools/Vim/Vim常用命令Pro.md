---
title: Vim常用命令Pro
categories:
  - Tools
  - Vim
tags:
  - Vim
date: 2021-10-25 17:16:04
---

## 启动Vim
- vim + file: 从文件末尾开始
- vim +num file: 从文件第num行开始
- vim +/string file: 将光标停在文件中第一个匹配到的string上

## 多文档编辑
- vim file1 file2 file3 同时打开多个文档
- :e 文档名 进入vim后，可以直接去编辑别的文档，文档路径以开启vim的路径为根路径
- 在多文档模式下
    - :n 编辑下一个文档
    - :2n 编辑下两个文档
    - :N 编辑上一个文档
- :e# 或 Ctrl+^ 编辑上一个文档,用于两个文档相互交换编辑时使用。?# 代表的是编辑前一次编辑的文档
- :files 或 :buffers 或 :ls 列出当前 缓冲区 中的所有文档。加号 + 表示 缓冲区已经被修改过了。＃代表上一次编辑的文档，%是目前正在编辑中的文档
- :ls 列出所有打开文档号和文档，可以配合下面的 :b <文档号> 实现文档跳转
- :b <文档名或编号> 移至该文档，可以配合 e 使用，实现快速跳转
- :bNext 移至下一个文档，在当前缓冲区环状循环
- :wa 保存所有文档的改变
- :xa 保存所有文档的改变并退出vim
- :wqa 保存所有文档的改变并退出vim
- :qa 关闭所有buffer并退出vim，如果有没保存的buffer，会提示
- :qa! 关闭所有buffer并退出vim，不会保存buffer

## 文件操作
- :pwd 显示当前文档所在路径（显示文档名）
- :e 重新加载该文档
- :e 文档名 进入vim后，可以直接去编辑别的文档，文档路径以开启vim的路径为根路径(可参考多文档编辑)
- :e! 重新加载该文档,并忽略更改
- :e#或Ctrl+^  回到刚才编辑的文档
- :f 显示当前正在编辑的文档名
- :f filename 重命名当前编辑的文档
- :n1,n2w filename 选择性保存[n1,n2]行内容到指定文件文件中
- :wq 或 ZZ 保存并退出，这种方式及时文档没有修改也会再保存一次
- :x 保存并退出
- :w filename 另存为，不加filename则保存到原文档中, 较多用于在保存时提示没有写入权限的场景
- :qa 或 qa! 在多窗口下离开vim

## 多窗口
- 两次Ctrl+w 用于切换窗口（环状循环）
- :Sex 水平分割一个窗口，浏览文件系统
- :Vex 垂直分割一个窗口，浏览文件:n 移动到第n行。
- :sp filename 水平分割窗口，在新窗口里显示新文档，如果未指定filename，则新窗口里仍是原文档内容
- :vsp filename 同sp，不过是垂直分割窗口
- Ctrl + w 进入切换窗口的模式
    - Ctrl+w w 切换到下一个窗口
    - Ctrl+w h 切换至左窗口, h 可替换为 ⬅️
    - Ctrl+w l 切换至右窗口, l 可替换为 ➡️
    - Ctrl+w j 切换至上窗口, j 可替换为 ⬆️
    - Ctrl+w k 切换至下窗口, k 可替换为 ⬇️


## 光标移动
- :n 跳到第n行。
- :$ 移动到最后一行。
- H: 把光标移到屏幕最顶端一行。
- M: 把光标移到屏幕中间一行。
- L: 把光标移到屏幕最底端一行。系统

- g$: 移动光标所在屏幕行行尾。
- 0: 移动到行首。
- g0: 移到光标所在屏幕行行首。

- [: 上一个方法
- ]: 下一个方法

## 翻屏
- ctrl+f: 下翻一屏。
- ctrl+b: 上翻一屏。
- ctrl+d: 下翻半屏。
- ctrl+u: 上翻半屏。
- ctrl+e: 向下滚动一行。
- ctrl+y: 向上滚动一行。
- n%: 到文件n%的位置。
- zz: 将当前行移动到屏幕中央。
- zt: 将当前行移动到屏幕顶端。
- zb: 将当前行移动到屏幕底端。

## 插入文本
- i: 在光标前插入；一个小技巧：按8，再按i，进入插入模式，输入=， 按esc进入命令模式，就会出现8个=。 这在插入分割线时非常有用，如30i+就插入了36个+组成的分割线
- A: 在当前行最后插入；
- r filename在当前位置插入另一个文件的内容。
- :[n]r filename在第n行插入另一个文件的内容。
- :r !date 在光标处插入当前日期与时间。同理，:r !command可以将其它shell命令的输出插入当前文档。

## 剪切、复制、粘贴
- :m,nd 剪切m行到n行的内容。
- d1G或dgg: 剪切光标以上的所有行。
- dG: 剪切光标以下的所有行。
- d0: 删除（剪切）当前位置到行首的内容

## 块操作
- 块选中后，按c，再输入替换的内容，按ESC可实现块内内容替换

## 基本排版
- << 向左缩进一个shiftwidth
- \>> 向右缩进一个shiftwidth
- n>> 光标以下的n行会向右缩进

## 命令行模式下
- C-b： 移动到命令行开头。
- C-e： 移动到命令行末尾。

> 注:在普通终端下也可以使用, C-b 逐字符向前移动， C-e 到达命令尾部

## 其他
- Ctrl-g: 显示当前位置的行与总行数，以及当前所在行数占总行数的比例。
- Ctrl-r: 反撤销，用于还原u的操作。
