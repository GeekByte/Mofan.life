---
title: Vim寄存器与系统剪切板
categories:
  - 工具
  - Vim
tags:
  - Vim
date: 2021-10-31 10:01:38
---

## 前言

使用Vim比较爽的一点就是双手可以在小范围内运动就能实现光标的灵活移动以及内容的调整。由于我也是刚入手Vim，在编写文档的时候常常涉及到从Vim复制内容，到Vim外粘贴的情况，但是使用Vim自己的 y 命令复制后，却不能到外面粘贴，于是在搜索解决方案的时候，了解到了寄存器这个东西，所以记录一下。

## Vim寄存器

vim强大之处之一就是它自带一堆寄存器，每个寄存器独立使用，你可以在不同寄存器中存储不同数据，命令，你可以把这个想象成一个加强版的剪贴板，当然它的功能不止剪贴板这么简单。

Vim有9种寄存器：

1. 无名（unnamed）寄存器：""，缓存最后一次操作内容；

2. 数字（numbered）寄存器："0 ～"9，缓存最近操作内容，复制与删除有别, "0寄存器缓存最近一次复制的内容，"1-"9缓存最近9次删除内容

3. 行内删除（small delete）寄存器："-，缓存行内删除内容；

4. 具名（named）寄存器："a ～ "z或"A - "0Z，指定时可用；

5. 只读（read-only）寄存器：":,".,"%,"#，分别缓存最近命令、最近插入文本、当前文件名、当前交替文件名；

6. 表达式（expression）寄存器："=，只读，用于执行表达式命令；

7. 选择及拖拽（selection and drop）寄存器："*,"+,"~，存取GUI选择文本，可用于与外部应用交互，使用前提为系统剪切板（clipboard）可用；

8. 黑洞（black hole）寄存器："_，不缓存操作内容（干净删除）；

9. 模式寄存器（last search pattern）："/，缓存最近的搜索模式。

## 基本使用

#### 查看寄存器的状况

```txt
:reg
```

### 访问特定的寄存器

通过在操作方式(y(复制), p(粘贴))前加上寄存器名称，便可操作特定寄存器。

```txt
"ap      粘贴字母a寄存器内容  
"1y      把选取内容复制到数字寄存器1 
```

### 与系统剪切板交互

通过 `"+` + 操作方式实现，例如：

```txt
"+y 复制选中内容到剪切板
"+p 粘贴剪切板内容到Vim
"+gp 粘贴剪切板到Vim，并将光标移到内容后
```

如果想将这种命令的方式变成快捷键的方式，可以借助Vim的Map功能：

在`.vimrc`种增加：

```txt
nmap <c-v> "+gp  
nmap <c-c> "+y  
```

这样就能通过 `Ctrl + C` 实现复制，`Ctrl + V` 实现粘贴。

当然，如果不使用这种修饰键，也可以通过组合普通键的方式实现：

```txt
nmap <leader>v "+gp 
nmap <leader>c "+y 
```

\<leader>由自己设置，比如设置成`,` :

```txt
let mapleader="," 
```

