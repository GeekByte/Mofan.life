---
title: Vim 删除奇数行或偶数行
categories:
  - Tools
  - Vim
tags:
  - Vim
date: 2023-03-02 18:06:18
---

> Vim 操作奇偶数行的思路一般是先匹配两行，然后删除奇数行或偶数行，或合并两行。

### 方法一：使用 global 命令

删除奇数行
```txt
:g/^/+1 d
```

删除偶数行
```txt
:g/^/d|m
```

global 命令的格式:

```txt
:[range]global/{pattern}/{command}
```

global 命令实际上是分成两步执行：首先扫描 range 指定范围内的所有行，给匹配 pattern 的行打上标记；然后依次对打有标记的行执行 command 命令，如果被标记的行在对之前匹配行的命令操作中被删除、移动或合并，则其标记自动消失，而不对该行执行 command 命令。command 可以是一个 ex 命令，也可以是用 `|` 分隔的多个 ex 命令，这样我们就可以对被标记行，或从标记行寻址到的行进行多种不同的操作。

上面删除偶数行的命令，先匹配所有行，然后隔行删除（其中 +1 用以定位于当前行的下一行）。为什么是隔行呢？因为在对第一行执行 `+1 d` 命令时删除的是第二行，而第二行虽然也被标记了，但已不存在了，因此不会执行删除第三行的命令。


### 方法二：使用 normal 命令

删除奇数行
```txt
:%norm jkdd
```

删除偶数行
```txt
:%norm jdd
```




